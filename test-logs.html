<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Truck Log</title>
    <link rel="icon" href="fleetLogo.png" type="image/png">
    <link rel="stylesheet" href="test.css">
    <script src="https://apis.google.com/js/api.js"></script> <!-- ‚úÖ Load Google API -->
</head>

<body>
    <header>
        <div id="logoContainer">
            <img src="logo-business-card-style.png" alt="Turf LC Logo" id="companyLogo">
        </div>
        <h1>Truck Maintenance Log</h1>
    </header>

    <div class="log-container">
        <!-- Edit Button (Top Right) -->
        <button class="edit-btn" onclick="openEditForm()">‚úèÔ∏è Edit Truck Details</button>

        <!-- Centered Truck Title -->
        <h2 id="truckTitle" class="centered-title"></h2>

        <!-- Truck Details (Populated Dynamically) -->
        <div id="truckDetails" class="truck-details"></div>

        <!-- Maintenance History -->
        <h3>Maintenance History</h3>
        <ul id="maintenanceList"></ul>
        <div class="entry-container">
            <input type="text" id="maintenanceInput" placeholder="Enter maintenance details...">
            <label class="upload-icon">
                üìé
                <input type="file" id="maintenanceFile" class="hidden-file-input" accept=".jpg,.jpeg,.png,.pdf"
                    onchange="previewSelectedFile('maintenanceFile', 'maintenancePreview')">
            </label>
            <button class="add-entry-btn"
                onclick="addEntry('maintenanceList', 'maintenanceInput', 'maintenanceFile')">Add Entry</button>
                <div id="maintenancePreview" class="file-preview" style="display: none;"></div>

        </div>

        <!-- Repairs Needed -->
        <h3>Repairs Needed</h3>
        <ul id="repairsList"></ul>
        <div class="entry-container">
            <input type="text" id="repairsInput" placeholder="Enter Repair details...">
            <label class="upload-icon">
                üìé
                <input type="file" id="repairsFile" class="hidden-file-input" accept=".jpg,.jpeg,.png,.pdf"
                    onchange="previewSelectedFile('repairsFile', 'repairsPreview')">
            </label>
            <button class="add-entry-btn" onclick="addEntry('repairsList', 'repairsInput', 'repairsFile')">Add
                Entry</button>
            <div id="repairsPreview" class="file-preview" style="display: none;"></div>
        </div>

        <!-- Notes Section -->
        <h3>Notes</h3>
        <ul id="notesList"></ul>
        <div class="entry-container">
            <input type="text" id="notesInput" placeholder="Enter Note details...">
            <label class="upload-icon">
                üìé
                <input type="file" id="notesFile" class="hidden-file-input" accept=".jpg,.jpeg,.png,.pdf"
                    onchange="previewSelectedFile('notesFile', 'notesPreview')">
            </label>
            <button class="add-entry-btn" onclick="addEntry('notesList', 'notesInput', 'notesFile')">Add Entry</button>
            <div id="notesPreview" class="file-preview" style="display: none;"></div>
        </div>

        <!-- Bottom Buttons -->
        <div class="bottom-buttons">
            <button id="exportPDF">Export Log as PDF</button>
            <button onclick="window.location.href='test.html'">Back to Dashboard</button>
        </div>
    </div>

    <!-- Edit Form Modal -->
    <div id="editModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeEditForm()">&times;</span>
            <h2>Edit Truck Details</h2>
            <label>Mileage: <input type="text" id="editMileage"></label>
            <label>Engine Type: <input type="text" id="editEngine"></label>
            <label>Fuel Type: <input type="text" id="editFuel"></label>
            <label>VIN: <input type="text" id="editVIN" disabled></label>
            <label>Title #: <input type="text" id="editTitle"></label>
            <label>Plate #: <input type="text" id="editPlate"></label>
            <label>Registration Exp: <input type="text" id="editRegExp"></label>
            <label>Insurance Exp: <input type="text" id="editInsExp"></label>
            <label>Inspection Exp: <input type="text" id="editInspExp"></label>
            <label>Status:
                <select id="editStatus">
                    <option value="In Operation">In Operation</option>
                    <option value="Out of Service">Out of Service</option>
                </select>
            </label>
            <button class="saveChangesButton" onclick="saveEdits()">Save Changes</button>
        </div>
    </div>

    <script type="module" src="supabase-init.js"></script>

    <script src="main.js"></script>
</body>

</html>